<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Διπλωματικές Εργασίες</title>
    <link rel="stylesheet" type="text/css" href="/public/css/main_page.css">
</head>
<body>
    <div class="topBar">
        <div class="title">Διπλωματικές Εργασίες</div>
        <button onclick="toggleLoginForm()">Login</button>
    </div>
    <div class="content">
        <div class="announcementBoard">
            <h2>Announcement Board</h2>
            <ul>
                <li>Announcement 1</li>
                <li>Announcement 2</li>
                <li>Announcement 3</li>
            </ul>
        </div>
        <div class="timetable">
            <h2>Timetable</h2>
            <table>
                <tr>
                    <th>Time</th>
                    <th>Event</th>
                </tr>
                <tr>
                    <td>09:00 - 10:00</td>
                    <td>Event 1</td>
                </tr>
                <tr>
                    <td>10:00 - 11:00</td>
                    <td>Event 2</td>
                </tr>
                <tr>
                    <td>11:00 - 12:00</td>
                    <td>Event 3</td>
                </tr>
            </table>
        </div>
        <div class="loginPage" id="loginForm" style="display:none;">
            <form id="loginForm">
                <input type="text" name="username" size="30" id="username" placeholder="username" required> <br> <br>
                <input type="password" name="password" size="30" id="password" placeholder="password" required> <br> <br> 
                <button type="submit" name="Login" id="Login">Login</button>
            </form>
        </div>
    
        <script>
            function toggleLoginForm() {
                var form = document.getElementById("loginForm");
                if (form.style.display === "none" || form.style.display === "") {
                    form.style.display = "block";
                } else {
                    form.style.display = "none";
                }
            }
            
            document.getElementById('loginForm').addEventListener('submit', function(event) {
                event.preventDefault();
    
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
    
                const xhr = new XMLHttpRequest();
                xhr.open('POST', '/login', true);
                xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            const response = JSON.parse(xhr.responseText);
                            window.location.href = response.redirect;
                        } else {
                            alert('Invalid username or password');
                        }
                    }
                };
                xhr.send(JSON.stringify({ username, password }));
            });
        </script>
    </body>
</html>